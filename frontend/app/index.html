<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-box_textatible" content="ie=edge">
    <script src="scripts/konva.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- Environment Variables -->
    <script src="../config/config.js"></script>
    <title>ReGrail</title>
    <style>
      table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
      }
    </style>
  </head>
  <body>
  <div>
    <div id="block-select-container" style="position:absolute;top:5px;left:5px;z-index:2">
      <label for="model-select">Select Model:</label>
      <select name="model-select" id="model-select"></select>
      <button id="rename-model" type="button">Rename Model</button>
      <button id="new-model" type="button">New Model</button>
      <br>
      <label for="block-select">New Block:</label>
      <select name="block-select" id="block-select">
        <option disabled>Data Sources</option>
        <option disabled>--------------------</option>
        <option value="csv-file">CSV File</option>
        <option value="excel-file">Excel File</option>
        <option value="upload-file">Upload File</option>
        <option disabled>Transforms</option>
        <option disabled>--------------------</option>
        <option value="join">Join</option>
        <option value="filter-rows">Filter Rows</option>
        <option value="select-rows">Select Rows</option>
        <option value="order">Order</option>
        <!-- Counts Items in Cells. This is a bit specific, and combines splitting the cell into an array and then counting the items. -->
        <option value="count-items">Count Items</option>
        <option value="drop-columns">Drop Columns</option>
        <option value="group-by">Group By</option>
        <option value="sum-columns">Sum Columns</option>
        <!-- TODO: Improve Pivot Table -->
        <option value="pivot-table">Pivot Table</option>
      </select>
      <select name="data-select" id="data-select">
      </select>
      <input type="file" id="file-input" name="file-input" accept=".csv,.xlsx" />
      <button id="add-block" type="button">Add</button>
      <button id="compile-model" type="button">Compile + Run</button>
      <button id="run-to-selected" type="button">Run to Selected</button>
      <br>
      <span id="selected-block">Selected Block:</span>
    </div>

    <div id="flow"></div>
    <div style="max-width:33%;max-height:50%;display:block;margin:auto;position:absolute;top:50px;right:35px;overflow:scroll;">
      <p id="data-summary"></p>
      <table id="data-table" style="max-width:100%;max-height:100%;margin:auto;"></table>
    </div>
    <p id="error-message" style="max-width:33%;max-height:50%;position:absolute;top:0px;right:0px;color:red;"></p>
    <div id="transform-props" style="max-width:33%;max-height:50%;overflow:scroll;display:block;margin:auto;position:absolute;bottom:15px;right:15px;"></div>
  </div>
	<script src="./scripts/app.js"></script>
  </body>
</html>
